<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
 <modelVersion>4.0.0</modelVersion>
 <parent>
  <artifactId>mwtnSpectrum</artifactId>
  <groupId>com.highstreet.technologies.odl.dlux</groupId>
  <version>0.3.0-SNAPSHOT</version>
 </parent>
 <artifactId>mwtnSpectrum-bundle</artifactId>
 <name>${prefix} ${project.artifactId}</name>
 <packaging>bundle</packaging>

 <dependencies>
  <dependency>
   <groupId>org.osgi</groupId>
   <artifactId>org.osgi.core</artifactId>
   <version>${osgi.core.version}</version>
  </dependency>
  <dependency>
   <groupId>org.osgi</groupId>
   <artifactId>org.osgi.compendium</artifactId>
   <version>${osgi.core.version}</version>
  </dependency>
  <dependency>
   <groupId>org.apache.felix</groupId>
   <artifactId>org.osgi.compendium</artifactId>
   <version>${apache.felix.compendium}</version>
  </dependency>
  <dependency>
   <groupId>org.opendaylight.dlux</groupId>
   <artifactId>loader</artifactId>
   <version>${dlux.loader.version}</version>
  </dependency>
  <dependency>
   <groupId>com.highstreet.technologies.odl.dlux</groupId>
   <artifactId>mwtnSpectrum-module</artifactId>
   <version>0.3.0-SNAPSHOT</version>
  </dependency>
 </dependencies>
 <build>
  <resources>
   <resource>
    <directory>target/generated-resources</directory>
   </resource>
   <resource>
    <directory>src/main/resources</directory>
   </resource>
  </resources>
  <plugins>
   <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <version>2.6</version>
    <executions>
     <!--loader Resources -->
     <execution>
      <id>unpack-loader-resources</id>
      <goals>
       <goal>unpack-dependencies</goal>
      </goals>
      <phase>generate-resources</phase>
      <configuration>
       <outputDirectory>${project.build.directory}/generated-resources</outputDirectory>
       <groupId>com.highstreet.technologies.odl.dlux</groupId>
       <includeArtifactIds>mwtnSpectrum-module</includeArtifactIds>
       <excludes>META-INF\/**</excludes>
       <excludeTransitive>true</excludeTransitive>
       <ignorePermissions>false</ignorePermissions>
      </configuration>
     </execution>
    </executions>
   </plugin>
   <plugin>
    <groupId>org.apache.felix</groupId>
    <artifactId>maven-bundle-plugin</artifactId>
    <extensions>true</extensions>
    <configuration>
     <instructions>
      <Import-Package>org.osgi.service.http,
       org.osgi.framework;version="1.0.0",
       org.opendaylight.dlux.loader
      </Import-Package>
      <Export-Package></Export-Package>
     </instructions>
    </configuration>
   </plugin>
   
   <plugin>
    <artifactId>maven-resources-plugin</artifactId>
    <version>3.0.1</version>
    <executions>
     <execution>
      <id>copy-resources</id>
      <!-- here the phase you need -->
      <phase>package</phase>
      <goals>
       <goal>copy-resources</goal>
      </goals>
      <configuration>
       <outputDirectory>../../deploy</outputDirectory>
       <resources>
        <resource>
         <directory>target</directory>
         <includes>
          <include>${project.artifactId}-${project.version}.jar</include>
         </includes>
         <filtering>true</filtering>
        </resource>
       </resources>
      </configuration>
     </execution>
    </executions>
   </plugin>

  </plugins>
 </build>
</project>
